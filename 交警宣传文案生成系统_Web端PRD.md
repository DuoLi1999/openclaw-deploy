# OpenClaw 交警宣传文案生成系统 — Web 端产品需求文档 (PRD)

**文档版本**：v1.0
**日期**：2026-02-10
**产品名称**：OpenClaw 交警宣传文案生成系统（Web 端）
**技术栈**：React + Node.js
**终端覆盖**：桌面端优先，移动端响应式适配

---

## 1. 执行摘要

### 1.1 问题陈述

交警宣传部门需要持续在微博、微信公众号、抖音、快手等多平台发布交通安全宣传内容。当前文案创作完全依赖人工，存在以下痛点：

- 单篇文案创作耗时长（平均 30-60 分钟），产出效率低
- 不同平台的格式、字数、风格要求各异，需反复改写
- 法规条文引用需人工查找核对，容易出错
- 人员流动导致内容质量不稳定
- 缺乏统一的素材管理和审核流程

### 1.2 解决方案

基于 OpenClaw AI 能力构建 Web 端文案生成系统，通过 AI Skills 帮助宣传人员快速生成多风格、多平台适配的交通安全宣传文案，并提供素材库管理、审核流程和数据统计等配套功能。

### 1.3 成功指标

| 指标 | 目标值 | 衡量方式 |
|------|--------|----------|
| 单篇文案生成时间 | ≤ 5 分钟（含人工修改） | 从点击生成到确认发布的时间 |
| 文案一次通过审核率 | ≥ 70% | 审核通过数 / 总提交数 |
| 日均文案产出量 | 较人工提升 3 倍以上 | 系统统计每账号日均生成篇数 |
| 用户月活跃率 | ≥ 80% | 月活跃用户 / 总注册用户 |
| 系统可用性 | ≥ 99.5% | 月度正常运行时间 |

---

## 2. 用户角色与画像

### 2.1 宣传员（主要用户）

- **身份**：交警支队/大队宣传科工作人员
- **目标**：快速生成合规的多平台宣传文案
- **技术水平**：熟悉基础办公软件，不具备技术背景
- **使用场景**：日常宣传任务、节假日专题活动、突发事件快速响应

### 2.2 审核员

- **身份**：宣传科负责人或指定审核人
- **目标**：确保发布内容合规、准确、符合宣传口径
- **使用场景**：审批待发布文案，退回修改或批准发布

### 2.3 管理员

- **身份**：系统管理员或部门 IT 负责人
- **目标**：管理用户账号、权限配置、查看使用数据
- **使用场景**：用户管理、配额管理、数据统计查看

---

## 3. 功能需求

### 3.1 MVP 功能（第一期）

#### 3.1.1 文案生成

**US-001：多风格文案生成**

> 作为宣传员，我希望选择文案风格后由 AI 生成文案初稿，以便快速获得不同调性的内容。

验收标准：
- 系统提供至少 4 种文案风格选项：严肃正式、亲民温和、幽默风趣、警示教育
- 用户可输入主题关键词（必填）、补充描述（选填）
- 用户可选择一个或多个目标风格，系统为每种风格分别生成一篇文案
- AI 生成的文案在 10 秒内返回（500 字以内）
- 生成结果支持在线编辑、重新生成、复制到剪贴板

**US-002：多平台适配输出**

> 作为宣传员，我希望一次输入主题后自动获得适配不同平台的文案版本，以便减少重复改写。

验收标准：
- 支持以下平台适配：微博（≤140 字）、微信公众号（800-2000 字）、抖音/快手短视频脚本（≤300 字 + 分镜建议）、头条号（500-1500 字）
- 用户可勾选目标平台（支持多选），系统根据平台特性自动调整字数、格式和语气
- 各平台文案带有字数统计和平台特征标签
- 支持单独编辑某一平台版本而不影响其他版本

**US-003：法规条文智能引用**

> 作为宣传员，我希望 AI 在生成文案时能自动引用相关法规条文，以确保内容权威准确。

验收标准：
- 系统内置《道路交通安全法》及其实施条例、地方交通法规等常用法规库
- AI 生成文案时自动识别涉及法规的内容并插入准确条文引用
- 引用的法规条文以高亮样式呈现，点击可查看原文全文
- 用户可手动搜索法规条文并插入到文案中

**US-004：文案历史管理**

> 作为宣传员，我希望查看和管理历史生成的文案，以便复用和参考。

验收标准：
- 所有生成的文案自动保存，按时间倒序展示
- 支持按日期范围、风格、平台、关键词筛选历史文案
- 支持对历史文案进行收藏、删除、重新编辑操作
- 历史文案可一键重新生成（保留原始输入参数）

#### 3.1.2 素材库管理

**US-005：案例库管理**

> 作为宣传员，我希望将优秀案例存入素材库并快速检索调用，以便提升文案质量。

验收标准：
- 支持手动录入案例（标题、正文、来源、标签）
- 支持批量导入案例（Excel / CSV 格式）
- 支持按标签、关键词、时间范围搜索案例
- 案例可在文案生成时作为参考素材被 AI 引用
- 每条案例支持编辑、删除、收藏操作

**US-006：常用话术库**

> 作为宣传员，我希望维护一套常用话术模板，以便快速调用标准化表述。

验收标准：
- 支持创建话术条目（标题、内容、适用场景标签）
- 话术库按分类（如：酒驾警示、安全带提醒、节假日出行等）组织
- 文案生成界面可快捷调用话术插入到编辑区
- 支持话术的全文搜索

**US-007：敏感词自动检测**

> 作为宣传员，我希望系统在文案提交前自动检测敏感词，以避免内容违规。

验收标准：
- 系统内置政务场景敏感词库（可由管理员维护）
- 文案编辑时实时检测并高亮标记敏感词
- 提供敏感词替换建议
- 文案提交审核前强制通过敏感词检测，存在未处理敏感词时阻止提交

### 3.2 第二期功能

#### 3.2.1 审核流程

**US-008：多级审批**

> 作为审核员，我希望对宣传员提交的文案进行审批，以确保内容合规后再发布。

验收标准：
- 支持配置审批流程（单级审批 / 两级审批）
- 审核员收到待审批通知（站内消息）
- 审核操作：通过、退回（需填写退回原因）、修改后通过
- 文案状态流转：草稿 → 待审核 → 审核通过 / 已退回 → 已发布
- 审核记录完整留痕（审核人、时间、操作、备注）

**US-009：审核工作台**

> 作为审核员，我希望有专门的工作台查看和处理待审批文案。

验收标准：
- 审核工作台展示待审核文案列表（按提交时间排序）
- 支持查看文案全文、敏感词检测结果、历史审核记录
- 支持批量审核操作（全部通过 / 逐条审核）
- 统计展示本月审核数据（通过率、平均审核时长、退回原因分布）

#### 3.2.2 数据统计

**US-010：使用数据看板**

> 作为管理员，我希望查看系统使用数据，以评估系统价值和优化资源配置。

验收标准：
- 看板展示以下核心指标：
  - 文案总生成量（日/周/月趋势图）
  - 各风格/各平台生成占比（饼图）
  - 各用户使用量排行
  - 审核通过率趋势
  - 用量配额消耗进度
- 支持按时间范围、部门、用户筛选数据
- 支持将报表导出为 Excel

**US-011：效率对比分析**

> 作为管理员，我希望直观看到 AI 辅助带来的效率提升，以支撑采购决策。

验收标准：
- 展示人均文案产出量对比（使用前 vs 使用后）
- 展示预估节省人力时间（按每篇人工撰写 40 分钟估算）
- 可配置人工撰写的基准时间参数

### 3.3 第三期功能

#### 3.3.1 高级 AI 能力

**US-012：案例智能改写**

> 作为宣传员，我希望将历史案例一键改写为适合当前场景的新文案。

验收标准：
- 从案例库选择案例后，可指定改写目标（更换地点、时间、涉及车型等）
- AI 保留案例核心信息，按指定要求重新组织语言
- 改写结果与原文对比展示

**US-013：图文排版建议**

> 作为宣传员，我希望获得文案配图和排版建议，以提升内容传播效果。

验收标准：
- AI 根据文案内容推荐配图关键词和风格建议
- 提供不同平台的排版模板建议（如微信公众号的段落间距、强调样式等）
- 排版建议以可视化预览方式呈现

**US-014：飞书/钉钉集成**

> 作为宣传员，我希望在飞书/钉钉中直接使用文案生成功能，而不需要切换到独立系统。

验收标准：
- 提供飞书/钉钉机器人，通过对话交互生成文案
- 生成的文案可直接转发到指定群组或保存到文档
- 支持在飞书/钉钉中触发审核流程

---

## 4. 页面结构

### 4.1 整体信息架构

```
├── 登录页
├── 主工作台（首页）
│   ├── 快速生成入口
│   ├── 最近文案列表
│   └── 待办提醒（待审核等）
├── 文案生成
│   ├── 主题输入区
│   ├── 参数配置（风格、平台、字数）
│   ├── 素材引用面板
│   ├── 生成结果展示（多平台标签页）
│   └── 编辑器（富文本编辑、敏感词标记）
├── 素材库
│   ├── 案例库（列表 + 搜索 + CRUD）
│   ├── 话术库（分类浏览 + 搜索 + CRUD）
│   └── 法规库（全文检索 + 条文浏览）
├── 文案管理
│   ├── 我的文案（历史记录、收藏）
│   └── 审核工作台（第二期）
├── 数据看板（第二期）
│   ├── 使用统计
│   └── 效率分析
└── 系统管理（管理员）
    ├── 用户管理
    ├── 权限配置
    ├── 审核流程配置（第二期）
    ├── 敏感词库管理
    └── 配额管理
```

### 4.2 核心页面说明

#### 4.2.1 文案生成页（核心页面）

**布局**：左右分栏

- **左侧面板（输入区）**：
  - 主题输入框（支持多行文本）
  - 补充描述输入框（选填）
  - 风格选择（多选 Checkbox：严肃正式 / 亲民温和 / 幽默风趣 / 警示教育）
  - 目标平台选择（多选 Checkbox：微博 / 微信公众号 / 抖音 / 快手 / 头条号）
  - 素材引用按钮（打开侧边抽屉，可选择案例/话术/法规）
  - 「生成文案」按钮

- **右侧面板（输出区）**：
  - 顶部 Tab 切换：按平台分标签展示
  - 每个标签页内：
    - 文案内容（富文本编辑器，支持在线修改）
    - 法规引用高亮标记
    - 敏感词检测标记（红色下划线 + 替换建议 Tooltip）
    - 底部工具栏：字数统计 | 重新生成 | 复制 | 保存草稿 | 提交审核

#### 4.2.2 素材库页面

**布局**：顶部 Tab（案例库 / 话术库 / 法规库）+ 列表页

- **搜索栏**：关键词搜索 + 标签筛选 + 时间范围
- **列表区**：卡片式列表，展示标题、摘要、标签、创建时间
- **操作**：新建、编辑、删除、收藏、批量导入

---

## 5. 技术架构

### 5.1 架构概览

```
┌──────────────────────────────────────────────┐
│                  客户端 (Browser)              │
│          React SPA + Ant Design Pro           │
└──────────────┬───────────────────────────────┘
               │ HTTPS
┌──────────────▼───────────────────────────────┐
│              Nginx 反向代理                    │
│         (SSL 终止、静态资源、负载均衡)          │
└──────────────┬───────────────────────────────┘
               │
┌──────────────▼───────────────────────────────┐
│           Node.js 后端 (Express/Koa)          │
│  ┌─────────┐ ┌──────────┐ ┌───────────────┐  │
│  │ 用户认证 │ │ 文案服务  │ │  素材库服务    │  │
│  │ (JWT)   │ │          │ │               │  │
│  └─────────┘ └────┬─────┘ └───────────────┘  │
│                   │                           │
│  ┌────────────────▼────────────────────────┐  │
│  │        OpenClaw AI 服务层                │  │
│  │  Skills: 文案生成 / 法规查询 / 敏感词检测  │  │
│  └────────────────┬────────────────────────┘  │
└───────────────────┼──────────────────────────┘
                    │
┌───────────────────▼──────────────────────────┐
│              OpenClaw API                     │
│         (Claude / 其他大模型 API)              │
└──────────────────────────────────────────────┘

┌──────────────────────────────────────────────┐
│              数据存储层                        │
│  ┌──────────┐  ┌───────┐  ┌───────────────┐  │
│  │PostgreSQL│  │ Redis │  │ MinIO/本地存储  │  │
│  │(业务数据) │  │(缓存)  │  │  (文件素材)    │  │
│  └──────────┘  └───────┘  └───────────────┘  │
└──────────────────────────────────────────────┘
```

### 5.2 前端技术选型

| 技术 | 选型 | 说明 |
|------|------|------|
| 框架 | React 18+ | 组件化开发 |
| UI 组件库 | Ant Design 5.x | 适合中后台场景，政务风格 |
| 状态管理 | Zustand 或 Redux Toolkit | 全局状态管理 |
| 富文本编辑器 | TipTap 或 Slate.js | 支持自定义标记（敏感词高亮、法规引用） |
| HTTP 请求 | Axios | 接口调用 |
| 构建工具 | Vite | 开发构建 |
| 响应式 | CSS Media Query + Ant Design Grid | 桌面端优先，适配平板和手机 |

### 5.3 后端技术选型

| 技术 | 选型 | 说明 |
|------|------|------|
| 运行时 | Node.js 20 LTS | 后端运行时 |
| 框架 | Express 或 Koa | Web 框架 |
| 数据库 | PostgreSQL 15+ | 关系型数据存储 |
| 缓存 | Redis 7+ | 会话管理、接口缓存、相似文案缓存 |
| 文件存储 | MinIO（私有化）或本地文件系统 | 素材文件存储 |
| 认证 | JWT + RBAC | 用户认证与权限控制 |
| AI 接口 | OpenClaw SDK | 调用大模型 API |

### 5.4 关键接口设计

#### 文案生成接口

```
POST /api/v1/content/generate
```

请求：
```json
{
  "topic": "春节返程高速安全",
  "description": "针对春节假期结束高速返程高峰的安全提醒",
  "styles": ["friendly", "humorous"],
  "platforms": ["weibo", "wechat_mp", "douyin"],
  "reference_materials": ["case_id_001", "regulation_id_003"],
  "model_level": "standard"
}
```

响应：
```json
{
  "request_id": "req_abc123",
  "results": [
    {
      "platform": "weibo",
      "style": "friendly",
      "content": "...",
      "word_count": 138,
      "citations": [
        {"type": "regulation", "id": "reg_003", "text": "《道路交通安全法》第四十二条", "position": [45, 62]}
      ],
      "sensitive_words": []
    }
  ],
  "tokens_used": 1850,
  "quota_remaining": 482
}
```

#### 敏感词检测接口

```
POST /api/v1/content/check-sensitive
```

请求：
```json
{
  "content": "待检测的文案全文"
}
```

响应：
```json
{
  "has_sensitive": true,
  "items": [
    {
      "word": "xxx",
      "position": [12, 15],
      "level": "warning",
      "suggestion": "建议替换为 yyy"
    }
  ]
}
```

---

## 6. AI 系统需求

### 6.1 OpenClaw Skills 配置

| Skill | 功能 | 输入 | 输出 |
|-------|------|------|------|
| traffic-safety-copywriter | 交通安全文案生成 | 主题、风格、平台、参考素材 | 适配目标平台的文案 |
| regulation-lookup | 法规条文智能查询 | 关键词或文案上下文 | 匹配的法规条文及引用格式 |
| case-rewriter | 案例改写 | 原案例 + 改写要求 | 改写后的案例文案 |
| sensitive-word-checker | 敏感词检测 | 文案全文 | 敏感词列表及替换建议 |
| layout-advisor | 图文排版建议 | 文案内容 + 目标平台 | 排版建议和配图关键词 |

### 6.2 Prompt 工程规范

- 系统 Prompt 中注入角色定义：「你是一名交警宣传部门的专业文案编辑」
- 注入法规库上下文：通过 RAG 检索相关法规条文作为 Prompt 的参考资料
- 注入风格约束：根据用户选择的风格注入对应的写作指南
- 平台适配规则：注入目标平台的字数限制、格式要求和惯用表达

### 6.3 AI 输出质量评估

| 维度 | 评估方法 | 目标 |
|------|----------|------|
| 法规引用准确性 | 与法规原文比对 | 100% 引用准确 |
| 平台字数适配 | 自动字数校验 | 100% 符合平台限制 |
| 敏感词误检率 | 人工抽样评估 | 误检率 ≤ 5% |
| 用户满意度 | 文案采纳率（未大幅修改直接使用） | ≥ 60% |

---

## 7. 非功能性需求

### 7.1 安全性

| 需求 | 说明 | 优先级 |
|------|------|--------|
| 数据不出域 | 私有化部署场景下，所有数据和 API 调用不经过公网（或通过专线/VPN 调用 AI API） | P0 |
| 传输加密 | 全站 HTTPS，TLS 1.2+ | P0 |
| 身份认证 | JWT Token + 定期刷新，支持对接政务统一身份认证 | P0 |
| 权限控制 | RBAC 角色权限模型（宣传员 / 审核员 / 管理员） | P0 |
| 操作审计 | 所有关键操作（生成、编辑、审核、删除）记录审计日志 | P0 |
| 敏感数据 | 用户密码加盐哈希存储，API Key 加密存储 | P0 |
| 等保合规 | 满足等保二级及以上要求 | P1 |

### 7.2 性能

| 指标 | 目标值 |
|------|--------|
| 页面首屏加载 | ≤ 3 秒（桌面端，4G 网络） |
| 文案生成响应 | ≤ 10 秒（单平台单风格 500 字） |
| 素材库搜索响应 | ≤ 1 秒（1 万条记录以内） |
| 敏感词检测响应 | ≤ 500 毫秒 |
| 并发支持 | ≥ 50 个同时在线用户 |

### 7.3 可用性

| 需求 | 说明 |
|------|------|
| 浏览器兼容 | Chrome 90+、Edge 90+、Firefox 90+（政务环境优先 Chrome） |
| 响应式设计 | 桌面端（1280px+）完整功能，平板端（768px-1279px）核心功能可用，手机端（<768px）查看和简单编辑 |
| 无障碍 | 满足 WCAG 2.1 AA 级标准 |
| 国际化 | 仅支持中文（简体） |

### 7.4 可靠性

| 需求 | 说明 |
|------|------|
| 系统可用性 | ≥ 99.5%（月度） |
| 数据备份 | 每日自动全量备份，保留 30 天 |
| AI 服务降级 | 当 AI API 不可用时，系统其他功能（素材库、历史文案查看等）正常使用，文案生成页显示友好提示 |
| 错误恢复 | 文案编辑中浏览器崩溃/断网，恢复后可从自动保存的草稿继续编辑（每 30 秒自动保存） |

---

## 8. 部署与运维

### 8.1 私有化部署要求

**服务器最低配置**（50 用户以内）：

| 组件 | 配置 |
|------|------|
| 应用服务器 | 4 核 CPU / 8GB RAM / 100GB SSD |
| 数据库服务器 | 4 核 CPU / 16GB RAM / 200GB SSD |
| Redis | 可与应用服务器共用 |
| 操作系统 | CentOS 7+ / Ubuntu 20.04+ |

**部署方式**：Docker Compose 容器化部署，支持一键安装脚本。

### 8.2 网络要求

- 内网访问：系统部署在政务内网，用户通过内网访问
- AI API 调用：需开通到 OpenClaw API 端点的网络出口（可通过代理服务器/专线）
- 如需完全离线，需部署本地大模型（第三期规划）

---

## 9. 风险分析

| 风险 | 概率 | 影响 | 应对策略 |
|------|------|------|----------|
| AI 生成内容出现政治敏感错误 | 中 | 高 | 强制审核流程 + 敏感词检测双重保障；禁止未审核内容直接发布 |
| 法规引用不准确 | 中 | 高 | 法规引用通过 RAG 检索数据库原文，非 AI 自由生成；引用内容标注来源，方便人工核对 |
| AI API 服务不稳定 | 低 | 中 | 实现请求重试机制；支持多模型切换（主模型不可用时切换备用模型）；非 AI 功能独立可用 |
| 用户接受度低 | 中 | 中 | 提供充分培训；从小范围试点开始；持续收集反馈优化体验 |
| API 成本超预期 | 中 | 中 | 实施用量配额管理；相似文案缓存复用；简单文案使用低成本模型 |
| 私有化部署环境复杂 | 中 | 低 | 提供容器化部署方案；编写详细部署文档和排障指南 |

---

## 10. 迭代路线

### MVP（第一期）

- 用户认证与权限管理（宣传员 + 管理员角色）
- 文案生成核心功能（多风格 + 多平台）
- 法规条文智能引用
- 素材库（案例库 + 话术库 + 法规库）
- 敏感词检测
- 文案历史管理
- 私有化部署方案

### v1.1（第二期）

- 审核流程（多级审批 + 审核工作台）
- 数据统计看板（使用量 + 效率分析）
- 用量配额管理与超量提醒
- 相似文案缓存（降低 API 成本）

### v2.0（第三期）

- 案例智能改写
- 图文排版建议
- 飞书/钉钉集成
- 模型分级策略（简单任务用轻量模型）
- 本地大模型支持（可选，离线场景）
- 移动端专属优化

---

## 11. 非目标（明确不做）

以下功能不在本产品范围内：

- **自动发布到社交媒体平台**：系统仅生成文案，不对接各平台发布 API（政务账号管理风险高）
- **图片/视频生成**：系统提供配图建议和分镜脚本，不生成实际图片或视频素材
- **舆情监测与分析**：不包含社交媒体舆情采集和分析功能
- **多语言支持**：仅支持中文简体内容生成
- **公共访问**：系统仅供内部人员使用，不提供公众访问入口

---

**文档版本**：v1.0 | 2026-02-10
**编制**：OpenClaw 产品团队
